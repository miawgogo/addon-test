#!/usr/bin/with-contenv bashio
# vim: ft=bash
# shellcheck shell=bash
# ==============================================================================
# OpenThread BorderRouter start script
# ==============================================================================

# shellcheck disable=SC1091



backbone_if="$(bashio::api.supervisor 'GET' '/network/info' '' 'first(.interfaces[] | select (.primary == true)) .interface')"
sed -i "s/REPLACEME/$backbone_if/g" /etc/dhcpcd.conf
if bashio::config.true 'dhcp6-pd'; then
    /usr/sbin/dhcpcd -q -d
fi
